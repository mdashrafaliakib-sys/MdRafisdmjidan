<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Elite Earn Pro - Premium Edition</title>
    <script src="js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/all.min.css">
    <script src="js/firebase-app-compat.js"></script>
    <script src="js/firebase-database-compat.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Poppins:wght@300;400;600&family=Inter:wght@400;700&display=swap');
        :root { --primary: #00f2fe; --dark-bg: #0a0e17; }
        body { background: var(--dark-bg); color: #ffffff; font-family: 'Poppins', sans-serif; overflow-x: hidden; margin: 0; padding: 0; }
        
        #ban-overlay {
            position: fixed; inset: 0; background: #0a0e17; z-index: 999999;
            display: none; flex-direction: column; justify-content: center; align-items: center; text-align: center;
        }

        /* === RGB ADMIN MESSAGE STYLE START === */
        #admin-msg-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.9); backdrop-filter: blur(15px);
            z-index: 2000000; display: none; justify-content: center; align-items: center;
        }
        .rgb-card {
            background: rgba(15, 15, 25, 0.98); border-radius: 30px; padding: 35px; text-align: center;
            width: 88%; max-width: 360px; border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 0 40px rgba(0,0,0,0.8); transform: scale(0.7); opacity: 0; transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .rgb-card.active { transform: scale(1); opacity: 1; }
        .rgb-loader-box {
            position: relative; width: 110px; height: 110px; margin: 0 auto 25px; border-radius: 50%;
            background: conic-gradient(#ff0000, #ff8000, #ffff00, #00ff00, #00ffff, #0000ff, #8000ff, #ff00ff, #ff0000);
            animation: rgbSpin 1.5s linear infinite; padding: 5px;
        }
        @keyframes rgbSpin { 100% { transform: rotate(360deg); } }
        .loader-inner-dark { background: #0a0e17; width: 100%; height: 100%; border-radius: 50%; display: flex; justify-content: center; align-items: center; }
        #rgb-timer-txt { color: #fff; font-size: 35px; font-weight: 900; animation: reverseRgbSpin 1.5s linear infinite; font-family: 'Orbitron'; }
        @keyframes reverseRgbSpin { 100% { transform: rotate(-360deg); } }
        /* === RGB ADMIN MESSAGE STYLE END === */

        /* Channel Join Popup Style */
        #channel-popup {
            position: fixed; inset: 0; background: rgba(0,0,0,0.9); backdrop-filter: blur(10px);
            z-index: 1000000; display: none; flex-direction: column; justify-content: center; align-items: center;
        }

        .tg-left-btn { position: fixed; bottom: 100px; left: 20px; z-index: 6000; width: 60px; height: 60px; background: #24A1DE; border-radius: 50%; display: flex; justify-content: center; align-items: center; border: 2px solid white; box-shadow: 0 0 15px rgba(36, 161, 222, 0.5); cursor: pointer; animation: floatAni 3s infinite ease-in-out; }
        @keyframes floatAni { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .tg-left-btn i { font-size: 28px; color: white; }
        .tg-gift-tag { position: absolute; top: -8px; background: #ff0055; color: white; font-size: 9px; font-weight: bold; padding: 2px 6px; border-radius: 10px; border: 1px solid white; white-space: nowrap; }

        @keyframes moneyRain { 0% { transform: translateY(-10vh) rotate(0deg); opacity: 0; } 20% { opacity: 1; } 100% { transform: translateY(110vh) rotate(360deg); opacity: 0; } }
        .falling-money { position: fixed; top: -10%; color: #22c55e; z-index: 99999; pointer-events: none; filter: drop-shadow(0 0 5px rgba(34, 197, 94, 0.5)); animation: moneyRain 3s linear forwards; }
        
        #loader { position: fixed; inset: 0; background-color: #030305; z-index: 99999; display: flex; justify-content: center; align-items: center; transition: opacity 0.8s ease; }
        .background-visuals { position: absolute; width: 100%; height: 100%; z-index: 0; }
        .glow-ball { position: absolute; border-radius: 50%; filter: blur(100px); opacity: 0.4; animation: moveSlowly 15s infinite alternate ease-in-out; }
        .ball-1 { width: 350px; height: 350px; background: #00d2ff; top: -5%; left: -5%; }
        .ball-2 { width: 450px; height: 450px; background: #f00056; bottom: -10%; right: -5%; animation-delay: -5s; }
        @keyframes moveSlowly { 0% { transform: translate(0, 0); } 100% { transform: translate(40px, 60px); } }
        .loader-box { position: relative; z-index: 10; text-align: center; }
        .ring-frame { position: relative; width: 170px; height: 170px; margin: 0 auto 20px; display: flex; justify-content: center; align-items: center; }
        .spinner { position: absolute; width: 100%; height: 100%; border-radius: 50%; border: 4px solid transparent; border-top: 4px solid #00d2ff; border-bottom: 4px solid #f00056; animation: rotate 1s linear infinite; box-shadow: 0 0 20px rgba(0, 210, 255, 0.3); }
        @keyframes rotate { to { transform: rotate(360deg); } }
        .center-image { width: 145px; height: 145px; border-radius: 50%; object-fit: cover; border: 5px solid #050508; z-index: 5; }
        .bot-name { color: #fff; font-size: 24px; font-weight: bold; margin-bottom: 20px; letter-spacing: 1px; text-transform: uppercase; text-shadow: 0 0 10px #00d2ff, 0 0 20px #f00056; animation: glowText 2s infinite alternate; font-family: 'Orbitron'; }
        @keyframes glowText { from { opacity: 0.7; transform: scale(1); } to { opacity: 1; transform: scale(1.05); } }
        .percentage { color: #fff; font-size: 35px; font-weight: 800; margin-bottom: 10px; }
        .bar-container { width: 260px; height: 6px; background: rgba(255, 255, 255, 0.05); border-radius: 10px; margin: 0 auto; overflow: hidden; border: 1px solid rgba(255, 255, 255, 0.1); }
        .bar-fill { width: 0%; height: 100%; background: linear-gradient(90deg, #00d2ff, #f00056); box-shadow: 0 0 15px #00d2ff; }
        
        .neon-border { border: 1px solid rgba(0, 242, 254, 0.3); box-shadow: 0 0 15px rgba(0, 242, 254, 0.1); }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(20px); border-radius: 30px; border: 1px solid rgba(255, 255, 255, 0.1); }
        .btn-premium { background: linear-gradient(45deg, #4facfe 0%, #00f2fe 100%); transition: 0.3s; }
        .nav-icon { font-size: 1.2rem; color: #555; transition: 0.3s; cursor: pointer; }
        .nav-icon.active { color: var(--primary); transform: translateY(-5px); filter: drop-shadow(0 0 8px var(--primary)); }
        .page { animation: slideUp 0.4s ease-out; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .method-card { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); transition: 0.3s; cursor: pointer; border-radius: 20px; position: relative; }
        .method-card.active { border-color: #00f2fe; background: rgba(0, 242, 254, 0.15); transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0, 242, 254, 0.2); }
        .off-tag { position: absolute; top: 5px; right: 5px; background: #ff0055; color: white; font-size: 8px; padding: 1px 4px; border-radius: 5px; display: none; }
        
        .glass-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.4); backdrop-filter: blur(10px); display: none; justify-content: center; align-items: center; z-index: 20000; }
        .glass-modal { background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); backdrop-filter: blur(25px); padding: 35px; border-radius: 35px; text-align: center; width: 85%; max-width: 320px; box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5); transform: scale(0.8); opacity: 0; transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); }
        .glass-overlay.active { display: flex; }
        .glass-overlay.active .glass-modal { transform: scale(1); opacity: 1; }
        .icon-circle { width: 80px; height: 80px; background: linear-gradient(135deg, #42e695 0%, #3bb2b8 100%); border-radius: 50%; margin: 0 auto 20px; display: flex; justify-content: center; align-items: center; box-shadow: 0 10px 25px rgba(66, 230, 149, 0.4); }
        .checkmark-svg { width: 45px; height: 45px; stroke: white; stroke-width: 6; fill: none; stroke-dasharray: 100; stroke-dashoffset: 100; }
        .glass-overlay.active .checkmark-svg { animation: drawCheck 0.6s ease-out 0.3s forwards; }
        @keyframes drawCheck { to { stroke-dashoffset: 0; } }

        .podium-container { display: flex; justify-content: center; align-items: flex-end; gap: 15px; padding: 30px 10px 20px; margin-top: 10px; }
        .rank-card { display: flex; flex-direction: column; align-items: center; text-align: center; width: 90px; position: relative; }
        .pic-box { border-radius: 50%; object-fit: cover; background: #1a1f2e; display: block; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .rank-1 { transform: translateY(-20px) scale(1.1); z-index: 10; }
        .pic-1 { width: 90px; height: 90px; border: 4px solid #fbbf24; box-shadow: 0 0 25px rgba(251, 191, 36, 0.5); }
        .rank-2 { order: 1; }
        .pic-2 { width: 70px; height: 70px; border: 3px solid #e5e7eb; }
        .rank-3 { order: 3; }
        .pic-3 { width: 70px; height: 70px; border: 3px solid #cd7f32; }
        .name-txt { font-size: 11px; font-weight: bold; margin-top: 8px; width: 100%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .ref-badge { font-size: 10px; background: rgba(255,255,255,0.1); padding: 2px 8px; border-radius: 10px; margin-top: 4px; color: #00f2fe; }
        .list-item { display: flex; align-items: center; justify-content: space-between; padding: 12px 16px; border-bottom: 1px solid rgba(255,255,255,0.05); transition: background 0.2s; }
        .list-item:hover { background: rgba(255,255,255,0.03); }
        .list-pic { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; border: 1px solid rgba(255,255,255,0.2); }

        .task-box { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px; padding: 15px; display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; }

        .status-badge { font-size: 8px; padding: 2px 6px; border-radius: 5px; font-weight: bold; text-transform: uppercase; }
        .bg-pending { background: rgba(251, 191, 36, 0.1); color: #fbbf24; border: 1px solid #fbbf24; }
        .bg-approved { background: rgba(34, 197, 94, 0.1); color: #22c55e; border: 1px solid #22c55e; }
        .bg-rejected { background: rgba(239, 68, 68, 0.1); color: #ef4444; border: 1px solid #ef4444; }
    </style>
<link rel="me" href="https://www.blogger.com/profile/11454020969642639273">
<meta name="google-adsense-platform-account" content="ca-host-pub-1556223355139109">
<meta name="google-adsense-platform-domain" content="blogspot.com">

<script type="text/javascript" language="javascript">
  // Supply ads personalization default for EEA readers
  // See https://www.blogger.com/go/adspersonalization
  adsbygoogle = window.adsbygoogle || [];
  if (typeof adsbygoogle.requestNonPersonalizedAds === 'undefined') {
    adsbygoogle.requestNonPersonalizedAds = 1;
  }
</script>

<link rel="me" href="https://www.blogger.com/profile/11454020969642639273">
<meta name="google-adsense-platform-account" content="ca-host-pub-1556223355139109">
<meta name="google-adsense-platform-domain" content="blogspot.com">

<script type="text/javascript" language="javascript">
  // Supply ads personalization default for EEA readers
  // See https://www.blogger.com/go/adspersonalization
  adsbygoogle = window.adsbygoogle || [];
  if (typeof adsbygoogle.requestNonPersonalizedAds === 'undefined') {
    adsbygoogle.requestNonPersonalizedAds = 1;
  }
</script>

<link rel="me" href="https://www.blogger.com/profile/11454020969642639273">
<meta name="google-adsense-platform-account" content="ca-host-pub-1556223355139109">
<meta name="google-adsense-platform-domain" content="blogspot.com">
</head>
<body>

    <div id="admin-msg-overlay">
        <div class="rgb-card" id="rgb-msg-box">
            <span class="text-[10px] text-cyan-500 font-bold uppercase tracking-[4px] mb-5 block">System Notification</span>
            <div class="rgb-loader-box">
                <div class="loader-inner-dark">
                    <div id="rgb-timer-txt">7</div>
                </div>
            </div>
            <p id="admin-msg-body" class="text-white text-base font-semibold leading-relaxed mb-4">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
            <p class="text-gray-500 text-[9px] uppercase tracking-widest">Auto close in 7 seconds</p>
        </div>
    </div>
    <div id="ban-overlay">
        <div class="glass p-10 mx-6 border-red-500/50">
            <i class="fas fa-user-lock text-red-500 text-5xl mb-4"></i>
            <h2 class="text-2xl font-bold mb-2">Access Denied!</h2>
            <p class="text-gray-400 text-sm">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶æ‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
        </div>
    </div>

    <div id="channel-popup">
        <div class="glass p-8 mx-6 text-center border-cyan-500/50">
            <i class="fab fa-telegram text-cyan-400 text-6xl mb-4"></i>
            <h2 class="text-2xl font-bold mb-2 font-['Orbitron']">JOIN CHANNEL</h2>
            <p class="text-gray-400 text-sm mb-6">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤‡ßá ‡¶ú‡ßü‡ßá‡¶® ‡¶•‡¶æ‡¶ï‡¶æ ‡¶¨‡¶æ‡¶ß‡ßç‡¶Ø‡¶§‡¶æ‡¶Æ‡ßÇ‡¶≤‡¶ï‡•§ ‡¶ú‡ßü‡ßá‡¶® ‡¶ï‡¶∞‡ßá ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
            <a href="https://t.me/bangladeshi010" id="join-btn-link" target="_blank" class="w-full block py-4 bg-cyan-500 text-black rounded-2xl font-bold mb-3">JOIN NOW</a>
            <button onclick="checkChannelJoin()" class="w-full py-4 border border-cyan-500 text-cyan-500 rounded-2xl font-bold">I HAVE JOINED</button>
        </div>
    </div>

    <div class="tg-left-btn" onclick="joinTelegramAndEarn()">
        <div class="tg-gift-tag">Gift</div>
        <i class="fab fa-telegram-plane"></i>
    </div>

    <div id="loader">
        <div class="background-visuals">
            <div class="glow-ball ball-1"></div>
            <div class="glow-ball ball-2"></div>
        </div>
        <div class="loader-box">
            <div class="ring-frame">
                <div class="spinner"></div>
                <img src="https://i.ibb.co.com/ccjWrd6X/1656234745bkash-app-logo-png.png" alt="Profile" class="center-image">
            </div>
            <div class="bot-name">ùôèùòºùôÜùòº  ùòΩùôäùôè üú≤</div>
            <div class="percentage" id="pct">0%</div>
            <div class="bar-container">
                <div class="bar-fill" id="fill"></div>
            </div>
        </div>
    </div>

    <div id="withdraw-success-modal" class="hidden fixed inset-0 flex items-center justify-center z-[10000] bg-black/70 backdrop-blur-sm">
        <div class="glass p-10 rounded-[40px] text-center max-w-xs w-full border border-white/20">
            <div class="w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-green-500/50">
                <i class="fas fa-check text-green-500 text-4xl"></i>
            </div>
            <h2 class="text-2xl font-bold text-white mb-2" id="msg-title">Success!</h2>
            <p class="text-gray-400 text-sm mb-8 leading-relaxed" id="msg-desc">Action completed successfully.</p>
            <button onclick="closeWithdrawModal()" class="w-full bg-white text-black py-3 rounded-xl font-bold uppercase text-xs tracking-widest">Dismiss</button>
        </div>
    </div>

    <div class="glass-overlay" id="overlay">
        <div class="glass-modal">
            <div class="icon-circle"><svg class="checkmark-svg" viewBox="0 0 52 52"><path d="M14 27l7 7 17-17"></path></svg></div>
            <h2 id="modal-title" class="text-white text-2xl font-bold mb-2 font-['Inter']">Success!</h2>
            <p id="modal-text" class="text-white/70 text-sm font-['Inter']">Process completed.</p>
        </div>
    </div>

    <div class="max-w-md mx-auto min-h-screen p-6 pb-28">
        <div class="flex justify-between items-center mb-8">
            <div class="flex items-center gap-4">
                <div class="w-12 h-12 rounded-full border-2 border-cyan-400 p-0.5 shadow-lg">
                    <img id="user-photo" src="" class="rounded-full w-full h-full object-cover">
                </div>
                <div>
                    <h2 id="user-name" class="font-bold text-white leading-tight">Elite User</h2>
                    <p id="user-id-display" class="text-[10px] text-cyan-500 font-mono"></p>
                </div>
            </div>
            <div class="glass px-4 py-2 text-center neon-border">
                <p class="text-[9px] uppercase tracking-widest text-cyan-400">Balance</p>
                <p class="text-lg font-bold">‡ß≥ <span id="balance">0.00</span></p>
            </div>
        </div>

        <div id="p-home" class="page space-y-6">
            <div class="glass p-8 text-center relative overflow-hidden">
                <div class="w-16 h-16 bg-gradient-to-br from-cyan-400 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-xl shadow-cyan-500/30">
                    <i class="fas fa-video text-2xl text-white"></i>
                </div>
                <h2 class="text-xl font-bold mb-1 font-['Orbitron'] text-white">Daily Rewards</h2>
                <div class="bg-black/20 rounded-full px-3 py-1 inline-block mb-2 border border-white/5">
                   <p class="text-[10px] text-cyan-400 uppercase tracking-tighter">Today: <span id="viewed-count">0</span> / <span id="total-limit">0</span></p>
                </div>
                <div class="space-y-3 mt-4">
                    <button id="monetag-btn" onclick="watchMonetagAd()" class="w-full py-4 btn-premium rounded-2xl font-bold text-black uppercase tracking-wider text-sm flex items-center justify-center gap-2">
                        <i class="fas fa-play-circle"></i> Monetag Video
                    </button>
                    <button id="gigapub-btn" onclick="watchGigaPubAd()" class="w-full py-4 bg-white/10 hover:bg-white/20 border border-white/10 rounded-2xl font-bold text-white uppercase tracking-wider text-sm flex items-center justify-center gap-2 transition">
                        <i class="fas fa-bolt"></i> GigaPub Fast Ad
                    </button>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div class="glass p-5 flex flex-col items-center">
                    <i class="fas fa-users-crown text-amber-400 mb-2 text-xl"></i>
                    <p class="text-[10px] text-gray-400 uppercase">Referrals</p>
                    <p id="total-refs" class="font-bold text-white">0 Users</p>
                </div>
                <div class="glass p-5 flex flex-col items-center">
                    <i class="fas fa-wallet text-green-400 mb-2 text-xl"></i>
                    <p class="text-[10px] text-gray-400 uppercase">Min Withdraw</p>
                    <p id="min-withdraw-display" class="font-bold text-white">‡ß≥ 0</p>
                </div>
            </div>

            <div id="daily-tasks-area" class="space-y-3">
                <h3 class="text-[10px] font-bold text-cyan-400 uppercase tracking-widest ml-2">Extra Tasks</h3>
                <div id="tasks-list"></div>
            </div>
        </div>

        <div id="p-leader" class="page hidden space-y-4">
            <h2 class="text-center font-bold text-xl font-['Orbitron'] text-cyan-400 tracking-wider uppercase">Leaderboard</h2>
            <p class="text-center text-[10px] text-gray-400 mb-2">Top Referrers of All Time</p>
            
            <div class="podium-container">
                <div class="rank-card rank-2">
                    <div class="text-gray-300 font-bold text-xs mb-1">#2</div>
                    <img id="top2-img" src="images/149071.png" class="pic-box pic-2" onerror="handleImgError(this)">
                    <p id="top2-name" class="name-txt text-gray-300">Loading...</p>
                    <span id="top2-refs" class="ref-badge">0</span>
                </div>

                <div class="rank-card rank-1">
                    <i class="fas fa-crown text-yellow-400 mb-2 text-lg"></i>
                    <img id="top1-img" src="images/149071.png" class="pic-box pic-1" onerror="handleImgError(this)">
                    <p id="top1-name" class="name-txt text-yellow-400">Loading...</p>
                    <span id="top1-refs" class="ref-badge text-yellow-300 border border-yellow-500/30">0</span>
                </div>

                <div class="rank-card rank-3">
                    <div class="text-orange-400 font-bold text-xs mb-1">#3</div>
                    <img id="top3-img" src="images/149071.png" class="pic-box pic-3" onerror="handleImgError(this)">
                    <p id="top3-name" class="name-txt text-orange-400">Loading...</p>
                    <span id="top3-refs" class="ref-badge">0</span>
                </div>
            </div>

            <div class="glass overflow-hidden">
                <div id="leaderboard-list-main" class="divide-y divide-white/5">
                    <div class="p-4 text-center text-xs text-gray-500">Loading list...</div>
                </div>
            </div>
        </div>

        <div id="p-refer" class="page hidden space-y-6">
            <h2 class="text-center font-bold text-xl font-['Orbitron'] mb-4 text-cyan-400">Refer & Earn</h2>
            <div class="glass p-6 text-center">
                <div class="mb-6 p-4 bg-white/5 border border-white/10 rounded-2xl">
                    <p class="text-lg font-bold">‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá ‡¶™‡¶æ‡¶¨‡ßá‡¶®: <span id="refer-bonus-val" class="text-cyan-400">‡ß≥ 0</span></p>
                </div>
                <i class="fas fa-share-nodes text-4xl text-cyan-400 mb-4"></i>
                <div class="bg-black/40 p-4 rounded-xl flex justify-between items-center border border-white/5">
                    <p id="ref-link-text" class="text-[10px] truncate text-gray-400 mr-2">Loading...</p>
                    <button onclick="copyRef()" class="text-cyan-400 font-bold text-xs shrink-0">COPY</button>
                </div>
            </div>
        </div>

        <div id="p-profile" class="page hidden space-y-6">
            <h2 class="text-center font-bold text-xl font-['Orbitron'] mb-4 text-cyan-400">Withdrawal</h2>
            
            <div class="glass p-4 flex justify-between items-center border border-cyan-500/30 mb-2">
                <div class="flex items-center gap-3">
                    <i class="fab fa-telegram text-2xl text-cyan-400"></i>
                    <div>
                        <p class="text-xs font-bold">Need Help?</p>
                        <p class="text-[9px] text-gray-400">Contact our support team</p>
                    </div>
                </div>
                <a href="https://t.me/ZERO_BC" target="_blank" class="bg-cyan-500 text-black px-4 py-1.5 rounded-lg text-[10px] font-bold uppercase">Support</a>
            </div>

            <div class="glass p-4 text-center border-dashed border-cyan-500/30">
                <p class="text-[10px] text-gray-400 uppercase tracking-widest mb-1">Minimum Requirement</p>
                <p class="text-sm font-bold text-white">‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá <span class="text-cyan-400">‡ß≥ <span id="min-withdraw-info">0</span></span></p>
            </div>
            <div class="glass p-6">
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <div id="bkash-btn" onclick="selectMethod(this, 'Bkash')" class="method-card p-4 flex flex-col items-center">
                        <div id="bkash-off" class="off-tag">OFF</div>
                        <img src="https://i.ibb.co.com/ccjWrd6X/1656234745bkash-app-logo-png.png" class="w-8 h-8 rounded mb-1">
                        <span class="text-xs">Bkash</span>
                    </div>
                    <div id="nagad-btn" onclick="selectMethod(this, 'Nagad')" class="method-card p-4 flex flex-col items-center">
                        <div id="nagad-off" class="off-tag">OFF</div>
                        <img src="https://i.ibb.co.com/604TT93n/1769842875152.jpg" class="w-8 h-8 rounded mb-1">
                        <span class="text-xs">Nagad</span>
                    </div>
                </div>
                <input type="number" id="withdraw-amount" placeholder="Amount" class="w-full bg-black/30 border border-white/10 rounded-xl p-4 mb-4 outline-none text-white">
                <input type="number" id="wallet-number" placeholder="Number" class="w-full bg-black/30 border border-white/10 rounded-xl p-4 mb-4 outline-none text-white">
                <button onclick="handleWithdraw()" class="w-full py-4 btn-premium rounded-2xl font-bold text-black uppercase tracking-widest">Submit Request</button>
                <div class="mt-8 pt-4 border-t border-white/10">
                    <h3 class="text-[10px] font-bold text-cyan-400 mb-4 uppercase tracking-[3px] text-center">Withdrawal History</h3>
                    <div id="withdraw-history" class="space-y-3"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] glass p-4 flex justify-around items-center z-[5000]">
        <i class="fas fa-home nav-icon active" onclick="showPage('p-home', this)"></i>
        <i class="fas fa-chart-line nav-icon" onclick="showPage('p-leader', this)"></i>
        <i class="fas fa-users nav-icon" onclick="showPage('p-refer', this)"></i>
        <i class="fas fa-wallet nav-icon" onclick="showPage('p-profile', this)"></i>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDG1OiOQ7lFJOjmUcaqg1GNwOWg2TtzzPM",
  authDomain: "aminjdk-5c443.firebaseapp.com",
  databaseURL: "https://aminjdk-5c443-default-rtdb.firebaseio.com",
  projectId: "aminjdk-5c443",
  storageBucket: "aminjdk-5c443.firebasestorage.app",
  messagingSenderId: "585088594995",
  appId: "1:585088594995:web:406b3d44540a507135df46",
  measurementId: "G-9L523PL8YD"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const tele = window.Telegram.WebApp;
        tele.expand();

        function handleImgError(img) {
            img.onerror = null; 
            img.src = "https://cdn-icons-png.flaticon.com/512/149/149071.png";
        }

        const userId = tele.initDataUnsafe.user ? tele.initDataUnsafe.user.id : "GUEST_" + Math.floor(Math.random() * 9999);
        const userName = tele.initDataUnsafe.user ? tele.initDataUnsafe.user.first_name : "Elite User";
        const userPic = tele.initDataUnsafe.user?.photo_url || "https://api.dicebear.com/7.x/avataaars/svg?seed=" + userId;

        document.getElementById('user-name').innerText = userName;
        document.getElementById('user-id-display').innerText = "ID: " + userId;
        document.getElementById('user-photo').src = userPic;
        document.getElementById('ref-link-text').innerText = "https://t.me/Dxsifatbot?startapp=" + userId;

        const userRef = db.ref('users/' + userId);
        let myBalance = 0, adReward = 0, dailyAdLimit = 10, minWithdraw = 0, selectedMethodName = "";
        let clickedJoin = false; 
        
        let bkashActive = true, nagadActive = true;
        let bkashMsg = "", nagadMsg = "";

        // === RGB ADMIN MESSAGE LOGIC ===
        let lastMsgVal = localStorage.getItem('last_admin_msg_seen') || "";

        function showRgbAdminNotice(msg) {
            if (!msg || msg === lastMsgVal) return;
            
            const overlay = document.getElementById('admin-msg-overlay');
            const box = document.getElementById('rgb-msg-box');
            const timerEl = document.getElementById('rgb-timer-txt');
            const bodyEl = document.getElementById('admin-msg-body');

            bodyEl.innerText = msg;
            overlay.style.display = 'flex';
            setTimeout(() => box.classList.add('active'), 100);

            let timeLeft = 7;
            timerEl.innerText = timeLeft;

            const countdown = setInterval(() => {
                timeLeft--;
                timerEl.innerText = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(countdown);
                    box.classList.remove('active');
                    setTimeout(() => {
                        overlay.style.display = 'none';
                        localStorage.setItem('last_admin_msg_seen', msg);
                    }, 500);
                }
            }, 1000);
        }

        db.ref('settings/admin_msg').on('value', (snap) => {
            if(snap.exists()) {
                showRgbAdminNotice(snap.val());
            }
        });

        document.getElementById('join-btn-link').addEventListener('click', () => {
            clickedJoin = true;
        });

        userRef.on('value', (snap) => {
            if(snap.exists()){
                const d = snap.val(); 
                if(d.status === 'banned') {
                    document.getElementById('ban-overlay').style.display = 'flex';
                    document.body.style.overflow = 'hidden';
                } else {
                    document.getElementById('ban-overlay').style.display = 'none';
                    document.body.style.overflow = 'auto';
                }

                myBalance = parseFloat(d.balance || 0);
                document.getElementById('balance').innerText = myBalance.toFixed(2);
                document.getElementById('total-refs').innerText = (d.referrals || 0) + " Users";
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('viewed-count').innerText = (d.last_ad_date === today) ? (d.ads_viewed_today || 0) : 0;
            }
        });

        async function checkReferral() {
            const startParam = tele.initDataUnsafe.start_param;
            const deviceId = btoa(navigator.userAgent).substring(0, 15);
            const isDeviceUsed = localStorage.getItem('app_installed_v1');

            const userSnapshot = await userRef.once('value');
            if (userSnapshot.exists()) return;

            if (!startParam || startParam == userId) {
                await userRef.set({ 
                    name: userName, balance: 0, referrals: 0, status: 'active', 
                    joined_at: Date.now(), photo: userPic, device: deviceId 
                });
                localStorage.setItem('app_installed_v1', 'true');
                return;
            }

            try {
                const ipRes = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipRes.json();
                const currentIP = ipData.ip.replace(/\./g, '_');

                const ipRef = db.ref('security/ips/' + currentIP);
                const devRef = db.ref('security/devices/' + deviceId);
                
                const [ipSnap, devSnap] = await Promise.all([ipRef.once('value'), devRef.once('value')]);

                if (ipSnap.exists() || devSnap.exists() || isDeviceUsed === 'true') {
                    await userRef.set({ 
                        name: userName, balance: 0, referrals: 0, status: 'active', 
                        security_note: 'Duplicate Attempt', photo: userPic, device: deviceId 
                    });
                } else {
                    const configSnap = await db.ref('settings/config').once('value');
                    const bonus = parseFloat(configSnap.val().referBonus) || 0;
                    const referrerId = startParam;

                    await userRef.set({ 
                        name: userName, balance: 0, referrals: 0, status: 'active', 
                        referredBy: referrerId, joined_at: Date.now(), photo: userPic, device: deviceId
                    });

                    const rRef = db.ref('users/' + referrerId);
                    const rSnap = await rRef.once('value');
                    if (rSnap.exists() && rSnap.val().status !== 'banned') {
                        const rData = rSnap.val();
                        await rRef.update({ 
                            balance: (parseFloat(rData.balance) || 0) + bonus, 
                            referrals: (parseInt(rData.referrals) || 0) + 1 
                        });
                    }
                    
                    await ipRef.set({ used_by: userId, time: Date.now() });
                    await devRef.set({ used_by: userId, time: Date.now() });
                }
                localStorage.setItem('app_installed_v1', 'true');
            } catch (err) {
                await userRef.set({ name: userName, balance: 0, referrals: 0, status: 'active', photo: userPic });
            }
        }

        function loadAdminTasks() {
            db.ref('tasks').on('value', (snap) => {
                const list = document.getElementById('tasks-list');
                if(!list) return;
                list.innerHTML = "";
                
                if (snap.exists()) {
                    userRef.child('completed_tasks').once('value', (userTasksSnap) => {
                        const completedTasks = userTasksSnap.val() || {};
                        snap.forEach(child => {
                            const task = child.val();
                            const taskId = child.key;
                            const isDone = completedTasks[taskId] === true;
                            
                            list.innerHTML += `
                                <div class="task-box">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 ${isDone ? 'bg-gray-500/10' : 'bg-cyan-400/10'} rounded-full flex items-center justify-center border ${isDone ? 'border-gray-500/20' : 'border-cyan-400/20'}">
                                            <i class="fas fa-check-circle ${isDone ? 'text-gray-500' : 'text-cyan-400'}"></i>
                                        </div>
                                        <div>
                                            <p class="text-[11px] font-bold ${isDone ? 'text-gray-500 line-through' : 'text-white'}">${task.title}</p>
                                            <p class="text-[9px] ${isDone ? 'text-gray-500' : 'text-cyan-400'} font-bold">+ ‡ß≥ ${task.reward}</p>
                                        </div>
                                    </div>
                                    ${isDone 
                                        ? `<button class="bg-gray-700 text-gray-400 text-[10px] font-bold px-4 py-2 rounded-xl cursor-not-allowed">DONE</button>`
                                        : `<button onclick="completeTask('${taskId}', '${task.link}', ${task.reward})" class="bg-white text-black text-[10px] font-bold px-4 py-2 rounded-xl">START</button>`
                                    }
                                </div>
                            `;
                        });
                    });
                } else {
                    list.innerHTML = `<p class="text-center text-[10px] text-gray-500 py-4">No tasks available</p>`;
                }
            });
        }

        function completeTask(tid, link, reward) {
            window.open(link, "_blank");
            setTimeout(() => {
                if(confirm("Task complete ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®?")) {
                    userRef.once('value').then(s => {
                        const userData = s.val();
                        const completed = userData.completed_tasks || {};
                        if(completed[tid]) {
                            alert("‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶á ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï‡¶ü‡¶ø ‡¶è‡¶ï‡¶¨‡¶æ‡¶∞ ‡¶ï‡¶Æ‡¶™‡ßç‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®!");
                            return;
                        }
                        const b = (parseFloat(userData.balance) || 0) + reward;
                        userRef.update({ balance: b, [`completed_tasks/${tid}`]: true }).then(() => {
                            showToast("Success!", "‡ß≥" + reward + " added.");
                        });
                    });
                }
            }, 5000);
        }

        function joinTelegramAndEarn() {
            db.ref('settings/config').once('value').then((configSnap) => {
                const config = configSnap.val();
                const bonusAmount = parseFloat(config.tgBonus) || 5;
                const tgLink = config.tgLink || "https://t.me/bangladeshi010";
                userRef.once('value').then((snap) => {
                    const userData = snap.val();
                    if (userData && userData.tg_joined) {
                        window.open(tgLink, "_blank");
                        alert("‡¶Ü‡¶™‡¶®‡¶ø ‡¶á‡¶§‡¶ø‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡ßá‡¶á ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶®‡¶ø‡ßü‡ßá‡¶õ‡ßá‡¶®!");
                        return;
                    }
                    window.open(tgLink, "_blank");
                    setTimeout(() => {
                        if(confirm("‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤‡ßá ‡¶ú‡ßü‡ßá‡¶® ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®?")) {
                            const newBalance = (parseFloat(userData ? userData.balance : 0) || 0) + bonusAmount;
                            userRef.update({ balance: newBalance, tg_joined: true }).then(() => {
                                document.getElementById('msg-title').innerText = "Success!";
                                document.getElementById('msg-desc').innerText = "‡ß≥" + bonusAmount + " ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§";
                                startMoneyRain();
                                document.getElementById('withdraw-success-modal').classList.remove('hidden');
                            });
                        }
                    }, 2500);
                });
            });
        }

        db.ref('settings/config').on('value', (snap) => {
            if(snap.exists()) {
                const c = snap.val();
                minWithdraw = c.minWithdraw || 0;
                adReward = parseFloat(c.adReward || 0.5);
                dailyAdLimit = parseInt(c.dailyLimit || 10);
                bkashActive = (c.bkash_status !== 'off');
                nagadActive = (c.nagad_status !== 'off');
                bkashMsg = c.bkash_reason || "‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂ ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶®‡ßá ‡¶¨‡¶®‡ßç‡¶ß ‡¶Ü‡¶õ‡ßá‡•§";
                nagadMsg = c.nagad_reason || "‡¶®‡¶ó‡¶¶ ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶®‡ßá ‡¶¨‡¶®‡ßç‡¶ß ‡¶Ü‡¶õ‡ßá‡•§";
                document.getElementById('bkash-off').style.display = bkashActive ? 'none' : 'block';
                document.getElementById('nagad-off').style.display = nagadActive ? 'none' : 'block';
                document.getElementById('min-withdraw-display').innerText = "‡ß≥ " + minWithdraw;
                document.getElementById('min-withdraw-info').innerText = minWithdraw;
                document.getElementById('refer-bonus-val').innerText = "‡ß≥ " + (c.referBonus || 0);
                document.getElementById('total-limit').innerText = dailyAdLimit;
                document.getElementById('monetag-btn').style.display = (c.monetag_status === 'on') ? 'flex' : 'none';
                document.getElementById('gigapub-btn').style.display = (c.gigapub_status === 'on') ? 'flex' : 'none';
                if(c.monetag_status === 'on') loadMonetag(c.monetagId);
                if(c.gigapub_status === 'on') loadGigapub(c.gigapubId);
            }
        });

        function loadMonetag(id) {
            if(id && !document.getElementById('monetag-js')) {
                const s = document.createElement('script'); s.id = 'monetag-js'; s.src = 'https://alwingulla.com/88/tag.min.js';
                s.dataset.zone = id; s.dataset.sdk = `show_${id}`; document.body.appendChild(s);
            }
        }
        function loadGigapub(id) {
            if(id && !document.getElementById('gigapub-js')) {
                const s = document.createElement('script'); s.id = 'gigapub-js'; s.src = `https://ad.gigapub.tech/script?id=${id}`; document.body.appendChild(s);
            }
        }

        function watchMonetagAd() { checkLimit('Monetag'); }
        function watchGigaPubAd() { checkLimit('GigaPub'); }

        function checkLimit(type) {
            const today = new Date().toISOString().split('T')[0];
            userRef.once('value').then((snap) => {
                const d = snap.val();
                let countToday = (d && d.last_ad_date === today) ? (d.ads_viewed_today || 0) : 0;
                if (countToday < dailyAdLimit) {
                    if (type === 'Monetag') {
                        db.ref('settings/config/monetagId').once('value', (s) => {
                            const zid = s.val();
                            if(window[`show_${zid}`]) window[`show_${zid}`]().then(() => reward(adReward, type, countToday + 1, today));
                            else alert("Ad not ready");
                        });
                    } else {
                        if(window.showGiga) window.showGiga().then(() => reward(adReward, type, countToday + 1, today));
                        else alert("Ad not ready");
                    }
                } else alert("Today's limit reached!");
            });
        }

        function reward(amt, type, newCount, date) {
            userRef.update({ balance: myBalance + amt, ads_viewed_today: newCount, last_ad_date: date }).then(() => showToast("Success!", `‡ß≥${amt} earned`));
        }

        function showToast(t, txt) {
            const ot = document.getElementById('overlay');
            if(ot) {
                document.getElementById('modal-title').innerText = t; 
                document.getElementById('modal-text').innerText = txt;
                ot.classList.add('active');
                setTimeout(() => ot.classList.remove('active'), 2500);
            }
        }

        function showPage(id, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            document.querySelectorAll('.nav-icon').forEach(i => i.classList.remove('active'));
            el.classList.add('active');
            if(id === 'p-leader') fetchLeaders();
            if(id === 'p-profile') fetchWithdrawHistory();
        }

        function selectMethod(el, n) { 
            if(n === 'Bkash' && !bkashActive) return alert(bkashMsg);
            if(n === 'Nagad' && !nagadActive) return alert(nagadMsg);
            document.querySelectorAll('.method-card').forEach(m => m.classList.remove('active')); 
            el.classList.add('active'); 
            selectedMethodName = n; 
        }
        
        function copyRef() { const l = document.getElementById('ref-link-text').innerText; navigator.clipboard.writeText(l).then(() => showToast("Copied!", "Refer link copied.")); }

        function handleWithdraw() {
            const amt = parseFloat(document.getElementById('withdraw-amount').value);
            const num = document.getElementById('wallet-number').value;
            if(!selectedMethodName) return alert("‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡ßá‡¶•‡¶° ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®!");
            if(isNaN(amt) || amt <= 0) return alert("‡¶∏‡¶†‡¶ø‡¶ï ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶Æ‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶¶‡¶ø‡¶®!");
            if(!num || num.length < 10) return alert("‡¶∏‡¶†‡¶ø‡¶ï ‡¶ì‡ßü‡¶æ‡¶≤‡ßá‡¶ü ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶®!");
            if(amt < minWithdraw) return alert("‡¶Æ‡¶ø‡¶®‡¶ø‡¶Æ‡¶æ‡¶Æ ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡ß≥" + minWithdraw);
            if(amt > myBalance) return alert("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶®‡ßü!");
            const pushId = db.ref('withdrawals').push().key;
            const now = new Date();
            const timeFormat = now.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }) + " ‚Ä¢ " + now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: true });
            const wData = { name: userName, userId: userId.toString(), amount: amt, number: num, method: selectedMethodName, status: "Pending", date: timeFormat };
            db.ref('withdrawals/' + pushId).set(wData).then(() => {
                userRef.update({ balance: (myBalance - amt) });
                startMoneyRain();
                document.getElementById('msg-title').innerText = "Pending!";
                document.getElementById('msg-desc').innerText = `‡ß≥${amt} ‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞ ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶Ü‡¶õ‡ßá‡•§`;
                document.getElementById('withdraw-success-modal').classList.remove('hidden');
                document.getElementById('withdraw-amount').value = "";
                document.getElementById('wallet-number').value = "";
                fetchWithdrawHistory();
            }).catch(err => alert("Error: " + err.message));
        }

        function fetchWithdrawHistory() {
            db.ref('withdrawals').orderByChild('userId').equalTo(userId.toString()).on('value', (snap) => {
                const historyDiv = document.getElementById('withdraw-history');
                historyDiv.innerHTML = "";
                if(snap.exists()) {
                    let items = [];
                    snap.forEach(child => { items.push(child.val()); });
                    items.reverse(); 
                    items.forEach(w => {
                        let statusColor = "bg-pending";
                        if(w.status === "Approved") statusColor = "bg-approved";
                        if(w.status === "Rejected") statusColor = "bg-rejected";
                        historyDiv.innerHTML += `<div style="background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px; padding: 15px; margin-bottom: 10px;"><div style="display: flex; justify-content: space-between; align-items: start;"><div><div style="display: flex; align-items: center; gap: 8px;"><span style="font-weight: bold; color: white; font-size: 14px;">${w.method}</span><span class="status-badge ${statusColor}">${w.status}</span></div><p style="font-size: 10px; color: #9ca3af; margin-top: 4px;">${w.date}</p></div><div style="text-align: right;"><p style="font-size: 16px; font-weight: bold; color: white;">‡ß≥ ${w.amount}</p></div></div></div>`;
                    });
                } else {
                    historyDiv.innerHTML = `<p class="text-center text-[10px] text-gray-500 py-6">‡¶ï‡ßã‡¶® ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø</p>`;
                }
            });
        }

        function startMoneyRain() { for (let i = 0; i < 40; i++) setTimeout(createMoney, i * 100); }
        function createMoney() {
            const m = document.createElement('i'); m.className = 'fas fa-money-bill-wave falling-money';
            m.style.left = Math.random() * 100 + 'vw'; m.style.fontSize = (Math.random() * 20 + 20) + 'px';
            m.style.animationDuration = (Math.random() * 2 + 2) + 's'; document.body.appendChild(m);
            setTimeout(() => m.remove(), 3000);
        }

        function closeWithdrawModal() { document.getElementById('withdraw-success-modal').classList.add('hidden'); }

        function fetchLeaders() {
            db.ref('users').orderByChild('referrals').limitToLast(20).on('value', (snap) => {
                let users = [];
                snap.forEach(child => { users.push(child.val()); });
                users.sort((a, b) => (b.referrals || 0) - (a.referrals || 0));

                if(users[0]) {
                    document.getElementById('top1-img').src = users[0].photo || `https://ui-avatars.com/api/?name=${users[0].name}&background=random`;
                    document.getElementById('top1-name').innerText = users[0].name;
                    document.getElementById('top1-refs').innerText = (users[0].referrals || 0) + " Refs";
                }
                if(users[1]) {
                    document.getElementById('top2-img').src = users[1].photo || `https://ui-avatars.com/api/?name=${users[1].name}&background=random`;
                    document.getElementById('top2-name').innerText = users[1].name;
                    document.getElementById('top2-refs').innerText = (users[1].referrals || 0) + " Refs";
                }
                if(users[2]) {
                    document.getElementById('top3-img').src = users[2].photo || `https://ui-avatars.com/api/?name=${users[2].name}&background=random`;
                    document.getElementById('top3-name').innerText = users[2].name;
                    document.getElementById('top3-refs').innerText = (users[2].referrals || 0) + " Refs";
                }

                const listArea = document.getElementById('leaderboard-list-main');
                listArea.innerHTML = "";
                if(users.length > 3) {
                    for (let i = 3; i < users.length; i++) {
                        const u = users[i];
                        listArea.innerHTML += `<div class="list-item"><div class="flex items-center gap-3"><span class="text-gray-500 font-bold text-xs w-6 text-center">#${i+1}</span><img src="${u.photo || 'https://ui-avatars.com/api/?name='+u.name}" onerror="handleImgError(this)" class="list-pic"><span class="text-sm font-medium text-gray-200">${u.name}</span></div><span class="text-xs font-bold text-cyan-400">${u.referrals || 0} Refs</span></div>`;
                    }
                }
            });
        }

        function showChannelPopup() {
            document.getElementById('channel-popup').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        async function checkChannelJoin() {
            if(!clickedJoin) {
                // ‡¶¨‡ßç‡¶Ø‡¶æ‡¶® ‡¶≤‡¶ú‡¶ø‡¶ï ‡¶∞‡¶ø‡¶Æ‡ßÅ‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶è‡¶ñ‡¶® ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶¶‡¶ø‡¶¨‡ßá‡•§
                alert("Please click 'JOIN NOW' button first!");
                return;
            }
            await userRef.update({ channel_verified: true });
            document.getElementById('channel-popup').style.display = 'none';
            document.body.style.overflow = 'auto';
            showToast("Verified", "Welcome to Elite Earn Pro!");
        }

        window.onload = async () => {
            await checkReferral(); 
            loadAdminTasks();
            fetchWithdrawHistory();

            const userSnap = await userRef.once('value');
            if(!userSnap.exists() || !userSnap.val().channel_verified) {
                showChannelPopup();
            }
            
            let c = 0; 
            const iv = setInterval(() => {
                c += 2; 
                if(document.getElementById('fill')) document.getElementById('fill').style.width = c + "%"; 
                if(document.getElementById('pct')) document.getElementById('pct').innerText = c + "%";
                if (c >= 100) { 
                    clearInterval(iv); 
                    setTimeout(() => { 
                        if(document.getElementById('loader')) {
                            document.getElementById('loader').style.opacity = '0';
                            setTimeout(() => { document.getElementById('loader').style.display = 'none'; }, 800);
                        }
                    }, 500); 
                }
            }, 30); 
        };
    </script>


<!-- 'Il est de votre ressort d\x27informer les visiteurs √† propos des cookies utilis√©s et des donn√©es collect√©es sur votre blog. Blogger met √† votre disposition une notification standard que vous pouvez personnaliser, remplacer ou afficher telle quelle sur votre blog. Rendez-vous sur http://www.blogger.com/go/cookiechoices pour obtenir de plus amples informations.' -->
<script src="js/cookienotice.js" defer=""></script>
<script>
  document.addEventListener('DOMContentLoaded', function(event) {
    window.cookieChoices && cookieChoices.showCookieConsentBar && cookieChoices.showCookieConsentBar(
        (window.cookieOptions && cookieOptions.msg) || 'Ce site utilise des cookies provenant de Google pour fournir ses services et analyser le trafic. Votre adresse¬†IP et votre user-agent, ainsi que des statistiques relatives aux performances et √† la s√©curit√©, sont transmis √† Google afin d\x27assurer un service de qualit√©, de g√©n√©rer des statistiques d\x27utilisation, et de d√©tecter et de r√©soudre les probl√®mes d\x27abus.',
        (window.cookieOptions && cookieOptions.close) || 'OK¬†!',
        (window.cookieOptions && cookieOptions.learn) || 'En savoir plus',
        (window.cookieOptions && cookieOptions.link) || 'https://www.blogger.com/go/blogspot-cookies');
  });
</script>



<!-- 'Il est de votre ressort d\x27informer les visiteurs √† propos des cookies utilis√©s et des donn√©es collect√©es sur votre blog. Blogger met √† votre disposition une notification standard que vous pouvez personnaliser, remplacer ou afficher telle quelle sur votre blog. Rendez-vous sur http://www.blogger.com/go/cookiechoices pour obtenir de plus amples informations.' -->
<script src="js/cookienotice.js" defer=""></script>
<script>
  document.addEventListener('DOMContentLoaded', function(event) {
    window.cookieChoices && cookieChoices.showCookieConsentBar && cookieChoices.showCookieConsentBar(
        (window.cookieOptions && cookieOptions.msg) || 'Ce site utilise des cookies provenant de Google pour fournir ses services et analyser le trafic. Votre adresse¬†IP et votre user-agent, ainsi que des statistiques relatives aux performances et √† la s√©curit√©, sont transmis √† Google afin d\x27assurer un service de qualit√©, de g√©n√©rer des statistiques d\x27utilisation, et de d√©tecter et de r√©soudre les probl√®mes d\x27abus.',
        (window.cookieOptions && cookieOptions.close) || 'OK¬†!',
        (window.cookieOptions && cookieOptions.learn) || 'En savoir plus',
        (window.cookieOptions && cookieOptions.link) || 'https://www.blogger.com/go/blogspot-cookies');
  });
</script>
</body>
</html>