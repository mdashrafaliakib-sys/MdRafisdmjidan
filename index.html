<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>‡¶Ü‡¶∞‡ßç‡¶® ‡¶ì‡ßü‡¶æ‡¶≤‡ßá‡¶ü ‡¶°‡¶æ‡¶∞‡ßç‡¶ï</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <style>
        /* CSS (Dark Smooth & Extra Bold - Compact Version) */
        :root { 
    --primary: #f1c40f;
    --primary-light: #ff6b6b;
    --primary-gradient: linear-gradient(135deg, #f1c40f 0%, #f39c12 50%, #e67e22 100%);
    
    --secondary: #ff9f43;
    --secondary-gradient: linear-gradient(135deg, #ffb347, #ffcc33);
    
    --bg: #141414;
    --surface: #1f1f1f;
    --surface-light: #2c2c2c;
    
    --text: #ffffff;
    --text-muted: #d5d5d5;
    
    --gold: #ffd700;
    --gold-glow: rgba(255, 215, 0, 0.4);
    --silver: #ecf0f1;
    --bronze: #cd7f32;
    
    --danger: #ff4d4d;
    --danger-glow: rgba(255, 77, 77, 0.4);
    --success: #2ecc71;
    --success-glow: rgba(46, 204, 113, 0.4);
    --warning: #ffcc00;
    
    --input-bg: #2a2a2a;
    --input-focus: #3a3a3a;
    
    --nav-bg: rgba(20, 20, 20, 0.95);
}
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        
        /* ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶è‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® (Deep Breathing) */
        body { 
            background-color: var(--bg); 
            color: var(--text); 
            padding-bottom: 90px; 
            -webkit-tap-highlight-color: transparent; 
            animation: darkBreath 6s infinite alternate ease-in-out;
        }
        @keyframes darkBreath {
            0% { background-color: #121212; }
            100% { background-color: #191919; }
        }

        #app { max-width: 480px; margin: 0 auto; min-height: 100vh; position: relative; display: none; }

        /* BANNED SCREEN */
        #banned-screen { position: fixed; inset: 0; background: #000; z-index: 999999; display: none; flex-direction: column; justify-content: center; align-items: center; text-align: center; color: var(--danger); }
        #banned-screen i { font-size: 4rem; margin-bottom: 20px; animation: shake 0.5s infinite; }

        /* VOLTAGE LOADER */
        .loader-overlay { position: fixed; inset: 0; background: #000; z-index: 9999; display: flex; justify-content: center; align-items: center; flex-direction: column; }
        .voltage-ring { width: 70px; height: 70px; border-radius: 50%; border: 4px solid transparent; border-top-color: #ff0033; border-bottom-color: #00ccff; box-shadow: 0 0 25px rgba(255, 0, 51, 0.6), 0 0 25px rgba(0, 204, 255, 0.6); animation: voltageSpin 1s linear infinite; margin-bottom: 20px; position: relative; }
        .voltage-ring::before { content: ''; position: absolute; top: 10px; left: 10px; right: 10px; bottom: 10px; border-radius: 50%; border: 2px solid transparent; border-left-color: #fff; border-right-color: #fff; opacity: 0.5; animation: voltageSpin 2s linear infinite reverse; }
        @keyframes voltageSpin { 0% { transform: rotate(0deg); filter: hue-rotate(0deg); } 100% { transform: rotate(360deg); filter: hue-rotate(360deg); } }
        .loader-text { color: var(--text); font-weight: 900; letter-spacing: 2px; font-size: 1rem; text-transform: uppercase; text-shadow: 0 0 10px var(--primary); }
        
        /* HEADER & BALANCE (Compact) */
        .header { background: linear-gradient(160deg, #192a56, #273c75); padding: 40px 20px 70px; border-radius: 0 0 35px 35px; color: white; box-shadow: 0 10px 30px rgba(0,0,0,0.5); position: relative; }
        .top-bar { display: flex; justify-content: space-between; align-items: center; position: relative; z-index: 2; }
        .user-pill { display: flex; align-items: center; gap: 10px; background: rgba(0,0,0,0.4); padding: 5px 15px 5px 5px; border-radius: 50px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
        .user-pill img { width: 35px; height: 35px; border-radius: 50%; border: 2px solid var(--primary); object-fit: cover; }
        .user-info h3 { font-size: 0.85rem; font-weight: 800; line-height: 1.1; color: #fff; }
        .user-info p { font-size: 0.65rem; opacity: 0.8; font-weight: 700; }
        .support-btn { background: rgba(255,255,255,0.1); color: white; width: 35px; height: 35px; border-radius: 50%; border: none; font-size: 1rem; cursor: pointer; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }

        .balance-card { background: var(--surface); width: 92%; margin: -60px auto 20px; padding: 15px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); text-align: center; position: relative; z-index: 10; border: 1px solid rgba(255,255,255,0.05); }
        .bal-title { font-size: 0.7rem; text-transform: uppercase; color: var(--text-muted); letter-spacing: 1.5px; font-weight: 800; }
        .bal-amt { font-size: 2.2rem; font-weight: 900; color: var(--text); margin: 2px 0; text-shadow: 0 0 20px rgba(140, 122, 230, 0.3); }
        .currency { color: var(--primary); font-size: 1rem; font-weight: 800; }
        .stats { display: flex; justify-content: space-between; margin-top: 12px; padding-top: 12px; border-top: 2px dashed rgba(255,255,255,0.1); }
        .stat-box h4 { font-size: 1rem; color: var(--text); margin-bottom: 2px; font-weight: 900; } .stat-box p { font-size: 0.7rem; color: var(--text-muted); font-weight: 700; }

        /* SECTIONS */
        .page { display: none; padding: 0 15px; animation: slideUp 0.3s; }
        .page.active { display: block; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .sec-head { font-size: 1rem; font-weight: 900; margin: 20px 0 10px; color: var(--text); display: flex; align-items: center; gap: 8px; text-transform: capitalize; }
        .sec-head i { color: var(--primary); font-size: 1.1rem; }
        .sub-head { font-size: 0.8rem; color: var(--text-muted); font-weight: 800; margin: 15px 0 8px; text-transform: uppercase; letter-spacing: 1px; }

        /* ADS & TASKS (Compact) */
        .ad-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .ad-card { background: var(--surface); padding: 15px; border-radius: 16px; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.2); cursor: pointer; transition: 0.2s; border: 1px solid rgba(255,255,255,0.05); }
        .ad-card:active { transform: scale(0.96); background: #252525; } .ad-card.disabled { opacity: 0.4; filter: grayscale(1); pointer-events: none; }
        .ad-card i { font-size: 1.8rem; color: var(--secondary); margin-bottom: 8px; display: block; filter: drop-shadow(0 0 10px rgba(156, 136, 255, 0.4)); }
        .ad-card h4 { font-size: 0.85rem; font-weight: 800; margin-bottom: 4px; color: var(--text); }
        .ad-card span { font-size: 0.7rem; color: var(--text-muted); background: rgba(255,255,255,0.05); padding: 3px 6px; border-radius: 5px; font-weight: 700; }

        .task-list { display: flex; flex-direction: column; gap: 8px; }
        .task-item { background: var(--surface); padding: 10px 12px; border-radius: 14px; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 4px 12px rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.05); transition: transform 0.2s; }
        .task-item:active { transform: scale(0.98); }
        .task-left { display: flex; align-items: center; gap: 10px; }
        .task-icon { width: 38px; height: 38px; border-radius: 10px; object-fit: cover; border: 1px solid rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: center; }
        .task-info h4 { font-size: 0.9rem; font-weight: 800; line-height: 1.2; color: var(--text); }
        .task-info small { color: var(--text-muted); font-weight: 700; font-size: 0.75rem; }
        
        .btn-act { padding: 6px 12px; border-radius: 50px; border: none; font-weight: 800; font-size: 0.7rem; cursor: pointer; min-width: 70px; transition: 0.2s; }
        .btn-start { background: var(--text); color: var(--bg); }
        .btn-start:hover { background: var(--primary); color: white; }
        
        /* BOLD SMALL TIMER STYLE (UPDATED) */
        .btn-wait { 
            background: #2f3542; 
            color: #ff4757; 
            cursor: not-allowed; 
            font-family: 'Poppins', sans-serif; 
            border: 1px solid #ff4757; 
            font-weight: 900 !important; /* Extra Bold */
            font-size: 0.85rem !important; /* Small */
            padding: 5px 10px;
            min-width: 50px;
        }
        
        .btn-claim { background: var(--primary); color: white; animation: pulse 1s infinite; box-shadow: 0 0 10px var(--primary); }
        @keyframes pulse { 50% { transform: scale(1.05); box-shadow: 0 0 20px var(--primary); } }

        /* GIFT BOX ANIMATION */
        .gift-container { text-align: center; margin: 15px 0; }
        .gift-box { font-size: 3.5rem; color: var(--primary); animation: bounce 2s infinite; filter: drop-shadow(0 0 20px rgba(140, 122, 230, 0.6)); }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-12px) rotate(5deg); } }
        
        /* LEADERBOARD (Compact) */
        .podium { display: flex; justify-content: center; align-items: flex-end; gap: 8px; margin: 20px 0 30px; padding: 0 10px; }
        .podium-item { text-align: center; position: relative; width: 33%; }
        .rank-1 { order: 2; transform: scale(1.1); z-index: 2; margin-bottom: 8px; }
        .rank-1 img { border-color: var(--gold); box-shadow: 0 0 20px rgba(255, 215, 0, 0.4); } .rank-1 .crown { color: var(--gold); top: -30px; font-size: 1.8rem; }
        .rank-2 { order: 1; } .rank-2 img { border-color: var(--silver); } .rank-2 .crown { color: var(--silver); }
        .rank-3 { order: 3; } .rank-3 img { border-color: var(--bronze); } .rank-3 .crown { color: var(--bronze); }
        .podium-img { width: 45px; height: 45px; border-radius: 50%; border: 3px solid var(--surface); object-fit: cover; background: #2f3640; }
        .crown { position: absolute; top: -25px; left: 50%; transform: translateX(-50%); font-size: 1.2rem; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5)); }
        .podium-name { font-size: 0.7rem; font-weight: 800; margin-top: 6px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%; display: block; color: var(--text); }
        .podium-score { font-size: 0.65rem; color: var(--bg); font-weight: 900; background: var(--text); padding: 2px 6px; border-radius: 6px; display: inline-block; margin-top: 3px; }
        
        .lb-list { background: var(--surface); border-radius: 16px; padding: 8px 15px; border: 1px solid rgba(255,255,255,0.05); }
        .lb-item { display: flex; align-items: center; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .lb-item:last-child { border-bottom: none; }
        .lb-rank { font-weight: 900; width: 25px; color: var(--text-muted); font-size: 0.85rem; }
        .lb-img { width: 32px; height: 32px; border-radius: 50%; margin-right: 10px; object-fit: cover; background: #2f3640; border: 1px solid rgba(255,255,255,0.1); }
        .lb-name { font-weight: 700; font-size: 0.85rem; flex: 1; color: var(--text); }
        .lb-val { font-weight: 800; color: var(--primary); font-size: 0.85rem; }

        /* PROFILE & INPUTS (Compact) */
        .box { background: var(--surface); padding: 18px; border-radius: 18px; box-shadow: 0 5px 15px rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.05); }
        .input-wrap { position: relative; margin-bottom: 12px; }
        .input-wrap i { position: absolute; top: 50%; transform: translateY(-50%); left: 15px; color: var(--text-muted); }
        .inp { width: 100%; padding: 12px 12px 12px 40px; border: 2px solid transparent; border-radius: 12px; outline: none; font-weight: 700; background: var(--input-bg); color: white; transition: 0.3s; font-size: 0.85rem; }
        .inp:focus { border-color: var(--primary); background: #383e4a; }
        .btn-main { width: 100%; padding: 12px; background: var(--primary); color: white; border: none; border-radius: 12px; font-weight: 900; cursor: pointer; font-size: 0.9rem; box-shadow: 0 5px 15px rgba(108, 92, 231, 0.4); }
        .btn-main:active { transform: scale(0.98); }
        
        .hist-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 12px; background: var(--surface); border-radius: 12px; margin-bottom: 8px; border-left: 4px solid #444; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .hist-info h4 { font-weight: 800; color: var(--text); font-size: 0.85rem; }
        .hist-info small { color: var(--text-muted); font-size: 0.7rem; }
        .hist-item.pending { border-color: var(--gold); } .hist-item.completed { border-color: var(--success); } .hist-item.rejected { border-color: var(--danger); }
        .status-badge { font-size:0.65rem; padding:3px 6px; border-radius:5px; font-weight:900; text-transform:uppercase; }
        .pending .status-badge { color:var(--gold); background:rgba(241, 196, 15, 0.15); }
        .completed .status-badge { color:var(--success); background:rgba(76, 209, 55, 0.15); }
        .rejected .status-badge { color:var(--danger); background:rgba(232, 65, 24, 0.15); }
        
        .invite-box { display: flex; gap: 8px; margin-top: 10px; }
        .btn-share { background: #0088cc; color: white; flex: 1; border: none; padding: 10px; border-radius: 12px; font-weight: 800; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; box-shadow: 0 4px 10px rgba(0, 136, 204, 0.4); font-size: 0.85rem; }
        .btn-copy { background: var(--input-bg); color: white; width: 45px; border: none; border-radius: 12px; cursor: pointer; font-size: 1rem; transition: 0.2s; }
        .btn-copy:active { background: var(--primary); }

        /* JOIN MODAL STYLE */
        #verify-box { width: 90%; max-width: 350px; text-align: center; border: 2px solid var(--primary); transition: 0.3s; background: var(--surface); padding: 25px 20px; border-radius: 22px; box-shadow: 0 0 30px rgba(108, 92, 231, 0.2); }
        .join-btn { width: 100%; padding: 12px; background: #2f3640; color: white; border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; margin-bottom: 8px; font-weight: 800; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; transition: 0.2s; font-size: 0.85rem; }
        .join-btn:hover { background: #353b48; border-color: var(--primary); }
        .join-btn i { color: #0088cc; font-size: 1.1rem; }
        .verify-btn { width: 100%; padding: 12px; background: var(--success); color: white; border: none; border-radius: 12px; font-weight: 900; cursor: pointer; margin-top: 10px; box-shadow: 0 5px 15px rgba(76, 209, 55, 0.4); font-size: 0.9rem; transition: 0.3s; }
        .verify-btn.error { background: var(--danger); animation: shake 0.4s; }
        
        @keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(-10px); } 50% { transform: translateX(10px); } 75% { transform: translateX(-10px); } 100% { transform: translateX(0); } }
        .shake-error { animation: shake 0.4s ease-in-out; border-color: var(--danger) !important; box-shadow: 0 0 20px var(--danger) !important; }

        /* WELCOME MODAL ANIMATION */
        .welcome-box {
            animation: rgbGlow 1.5s linear infinite alternate;
            border: 3px solid transparent;
        }
        @keyframes rgbGlow {
            0% { box-shadow: 0 0 15px #ff0000, 0 0 30px #ff0000; border-color: #ff0000; }
            33% { box-shadow: 0 0 15px #00ff00, 0 0 30px #00ff00; border-color: #00ff00; }
            66% { box-shadow: 0 0 15px #0000ff, 0 0 30px #0000ff; border-color: #0000ff; }
            100% { box-shadow: 0 0 15px #ff00ff, 0 0 30px #ff00ff; border-color: #ff00ff; }
        }

        /* NAV */
        .nav { position: fixed; bottom: 15px; left: 50%; transform: translateX(-50%); width: 94%; max-width: 400px; background: rgba(30, 30, 30, 0.95); display: flex; justify-content: space-between; padding: 12px 25px; border-radius: 25px; box-shadow: 0 10px 40px rgba(0,0,0,0.6); z-index: 100; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.05); }
        .nav i { font-size: 1.3rem; color: rgba(255,255,255,0.3); cursor: pointer; transition: 0.3s; }
        .nav i.active { color: var(--primary); transform: translateY(-3px); text-shadow: 0 0 12px var(--primary); }
        .toast { position: fixed; top: 30px; left: 50%; transform: translateX(-50%); background: #2f3640; color: white; padding: 10px 20px; border-radius: 25px; font-size: 0.8rem; opacity: 0; transition: 0.3s; z-index: 10000; font-weight: 700; pointer-events: none; border: 1px solid var(--primary); box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .toast.show { opacity: 1; top: 40px; }
        .toast.error { border-color: var(--danger); box-shadow: 0 5px 15px rgba(232, 65, 24, 0.4); }
    </style>
<link rel="me" href="https://www.blogger.com/profile/11551086564924548821" />
<meta name='google-adsense-platform-account' content='ca-host-pub-1556223355139109'/>
<meta name='google-adsense-platform-domain' content='blogspot.com'/>

<script type="text/javascript" language="javascript">
  // Supply ads personalization default for EEA readers
  // See https://www.blogger.com/go/adspersonalization
  adsbygoogle = window.adsbygoogle || [];
  if (typeof adsbygoogle.requestNonPersonalizedAds === 'undefined') {
    adsbygoogle.requestNonPersonalizedAds = 1;
  }
</script>

</head>
<body>

    <div id="banned-screen">
        <i class="fas fa-ban"></i>
        <h1>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶®‡¶ø‡¶∑‡¶ø‡¶¶‡ßç‡¶ß</h1>
        <p style="color: white; margin-top: 10px;">‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶∂‡¶®‡¶æ‡¶ï‡ßç‡¶§ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§</p>
    </div>

    <div id="loader" class="loader-overlay">
        <div class="voltage-ring"></div>
        <p class="loader-text"><span id="prog-txt">‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</span></p>
    </div>

    <div id="join-modal" class="loader-overlay" style="display:none; background:rgba(0,0,0,0.95); z-index:99999;">
        <div id="verify-box" class="box">
            <i class="fas fa-shield-alt" style="font-size: 3rem; color: var(--primary); margin-bottom: 15px; filter: drop-shadow(0 0 10px rgba(108,92,231,0.5));"></i>
            <h3 style="margin-bottom: 8px; color: var(--text); font-weight: 900;">‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á‡¶ï‡¶∞‡¶£ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®</h3>
            <p style="font-size: 0.8rem; color: var(--text-muted); margin-bottom: 20px; font-weight: 700;">‡¶¨‡¶ü ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶≤‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶Ü‡¶ó‡ßá ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤‡ßá ‡¶ú‡¶Ø‡¶º‡ßá‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá</p>
            <button onclick="tg.openTelegramLink('https://t.me/My_Earning_Zone_In')" class="join-btn"><i class="fab fa-telegram-plane"></i> ‡¶™‡ßç‡¶∞‡¶Æ‡ßã‡¶∂‡¶® ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤‡ßá ‡¶ú‡¶Ø‡¶º‡ßá‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            <button onclick="tg.openTelegramLink('https://t.me/EARN_MONEY_V2_BO')" class="join-btn"><i class="fab fa-telegram-plane"></i> ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤‡ßá ‡¶ú‡¶Ø‡¶º‡ßá‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            <button id="v-btn" onclick="verifyJoin()" class="verify-btn"><i class="fas fa-check-circle"></i> ‡¶Ü‡¶Æ‡¶ø ‡¶ú‡¶Ø‡¶º‡ßá‡¶® ‡¶ï‡¶∞‡ßá‡¶õ‡¶ø</button>
        </div>
    </div>

    <div id="welcome-modal" class="loader-overlay" style="z-index: 100001; background: rgba(0,0,0,0.85); display: flex;">
        <div class="box welcome-box" style="width: 90%; max-width: 350px; text-align: center;">
            <h2 style="color: var(--success); font-weight: 900; margin-bottom: 10px;">‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ üéâ</h2>
            <p style="color: var(--text); font-size: 0.85rem; margin-bottom: 15px; line-height: 1.5; font-weight: 600;">
                ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ì‡¶Ø‡¶º‡ßá‡¶¨ ‡¶¨‡¶ü‡ßá ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶´‡ßç‡¶∞‡¶ø‡¶§‡ßá ‡¶á‡¶®‡¶ï‡¶æ‡¶Æ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®!üí•<br>
                ‡¶è‡¶¨‡¶Ç ‡¶è‡¶ï‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶¨‡¶ü ‡¶¶‡¶ø‡¶ö‡ßç‡¶õ‡ßá ‡¶Ö‡¶ü‡ßã ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ó‡ßá‡¶ü‡¶ì‡¶Ø‡¶º‡ßá ‡¶Ø‡¶æ ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡ßã‡¶® ‡¶¨‡¶ü‡ßá ‡¶™‡¶æ‡¶¨‡ßá‡¶® ‡¶®‡¶æ!‚úÖ
            </p>
            
            <div style="background: rgba(232, 65, 24, 0.1); border: 1px solid var(--danger); padding: 10px; border-radius: 10px; margin-bottom: 15px;">
                <h4 style="color: var(--danger); font-weight: 900; margin-bottom: 5px;">‚ö†Ô∏è ‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ ‚ö†Ô∏è</h4>
                <p style="font-size: 0.75rem; color: #ff6b6b; font-weight: 700;">‚ÄºÔ∏è ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ï‡ßç‡¶∑‡ßá‡¶§‡ßç‡¶∞‡ßá ‡¶ï‡ßã‡¶® ‡¶™‡ßç‡¶∞‡¶§‡¶æ‡¶∞‡¶®‡¶æ ‡¶ï‡¶∞‡¶≤‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡¶ø‡¶Ø‡ßá‡¶ï‡ßç‡¶ü ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá ‡¶§‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ü‡¶ø‡¶Æ ‡¶ï‡ßã‡¶® ‡¶≠‡¶æ‡¶¨‡ßá‡¶á ‡¶¶‡¶æ‡¶á ‡¶•‡¶æ‡¶ï‡¶¨‡ßá ‡¶®‡¶æ‚ÄºÔ∏è</p>
            </div>
            
            <p style="color: var(--primary); font-weight: 800; margin-bottom: 15px;">‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶ üíù</p>
            <button onclick="document.getElementById('welcome-modal').style.display='none'" class="btn-main">‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>
    </div>

    <div id="toast" class="toast">‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ</div>

    <div id="app">
        <div class="header">
            <div class="top-bar">
                <div class="user-pill">
                    <img id="u-img" src="">
                    <div class="user-info"><h3 id="u-name">...</h3><p id="u-id">...</p></div>
                </div>
                <button class="support-btn" onclick="openSupport()"><i class="fas fa-headset"></i></button>
            </div>
        </div>

        <div class="balance-card">
            <div class="bal-title">‡¶Æ‡ßã‡¶ü ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏</div>
            <div class="bal-amt"><span id="u-bal">0.00</span> <span id="cur-sym" class="currency">$DOGS</span></div>
            <div class="stats">
                <div class="stat-box"><h4 id="u-earn">0.00</h4><p>‡¶â‡¶™‡¶æ‡¶∞‡ßç‡¶ú‡¶ø‡¶§</p></div>
                <div class="stat-box"><h4 id="u-ref">0</h4><p>‡¶∞‡ßá‡¶´‡¶æ‡¶∞</p></div>
            </div>
        </div>

        <div id="p-home" class="page active">
            <div class="sec-head"><i class="fas fa-play-circle"></i> ‡¶¶‡ßà‡¶®‡¶ø‡¶ï ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶∏</div>
            <div id="ad-area" class="ad-grid"></div>

            <div class="sec-head"><i class="fas fa-tasks"></i> ‡¶ï‡¶æ‡¶ú‡¶∏‡¶Æ‡ßÇ‡¶π</div>
            
            <div id="onetime-task-area" class="task-list"></div>
            
            <div class="sub-head"><i class="fas fa-clock"></i> ‡¶¶‡ßà‡¶®‡¶ø‡¶ï ‡¶ï‡¶æ‡¶ú</div>
            <div id="daily-task-area" class="task-list"></div>
        </div>

        <div id="p-invite" class="page">
            <div class="gift-container">
                <i class="fas fa-gift gift-box"></i>
                <h2 style="color:var(--text); margin-top:10px; font-weight: 900;">‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶¶‡ßá‡¶∞ ‡¶Ü‡¶Æ‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£</h2>
                <p id="invite-txt" style="font-size:0.8rem; color:var(--text-muted); font-weight: 700;">‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶Ø‡¶º ‡¶ï‡¶∞‡ßÅ‡¶®!</p>
            </div>

            <div class="box" style="margin-bottom: 25px;">
                <input id="ref-link" class="inp" readonly style="text-align:center; background:#fff; color:#000; font-size: 0.75rem; margin-bottom:10px;">
                <div class="invite-box">
                    <button onclick="shareTg()" class="btn-share"><i class="fab fa-telegram-plane"></i> ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶¶‡ßá‡¶∞ ‡¶Ü‡¶Æ‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£ ‡¶ú‡¶æ‡¶®‡¶æ‡¶®</button>
                    <button onclick="copyRef()" class="btn-copy"><i class="far fa-copy"></i></button>
                </div>
            </div>

            <div class="sec-head"><i class="fas fa-trophy"></i> ‡¶∂‡ßÄ‡¶∞‡ßç‡¶∑ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ</div>
            <div id="podium-area" class="podium"></div>
            <div id="lb-area" class="lb-list"></div>
        </div>

        <div id="p-support" class="page">
            <div class="sec-head"><i class="fas fa-life-ring"></i> ‡¶π‡ßá‡¶≤‡ßç‡¶™ ‡¶∏‡ßá‡¶®‡ßç‡¶ü‡¶æ‡¶∞</div>
            <div class="task-list">
                <div class="task-item" onclick="tg.openTelegramLink('https://t.me/myIncometalent')">
                    <div class="task-left">
                        <div class="task-icon" style="background:rgba(0,168,255,0.1); color:#00a8ff; font-size:1.2rem; border:none;"><i class="fas fa-user-shield"></i></div>
                        <div class="task-info"><h4>‡¶Ø‡ßá ‡¶ï‡ßã‡¶® ‡¶ß‡¶∞‡¶®‡ßá‡¶∞ ‡¶¨‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</h4><small>‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶¨‡¶ü ‡¶°‡ßá‡¶≠‡ßá‡¶≤‡¶™‡¶æ‡¶∞</small></div>
                    </div>
                    <i class="fas fa-chevron-right" style="color:var(--text-muted)"></i>
                </div>

                <div class="task-item" onclick="tg.openTelegramLink('https://t.me/EARN_MONEY_V2_BO')">
                    <div class="task-left">
                        <div class="task-icon" style="background:rgba(156,136,255,0.1); color:var(--primary); font-size:1.2rem; border:none;"><i class="fas fa-users"></i></div>
                        <div class="task-info"><h4>Cash Earning ‡¶ï‡¶Æ‡¶ø‡¶â‡¶®‡¶ø‡¶ü‡¶ø</h4><small>‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™‡ßá ‡¶ú‡¶Ø‡¶º‡ßá‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</small></div>
                    </div>
                    <i class="fas fa-chevron-right" style="color:var(--text-muted)"></i>
                </div>

                <div class="task-item" onclick="tg.openTelegramLink('https://t.me/My_Earning_Zone_In')">
                    <div class="task-left">
                        <div class="task-icon" style="background:rgba(76,209,55,0.1); color:var(--success); font-size:1.2rem; border:none;"><i class="fas fa-money-check-alt"></i></div>
                        <div class="task-info"><h4>‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</h4><small>‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡ßÅ‡¶´</small></div>
                    </div>
                    <i class="fas fa-chevron-right" style="color:var(--text-muted)"></i>
                </div>

                <div class="task-item" onclick="showComingSoon()">
                    <div class="task-left">
                        <div class="task-icon" style="background:rgba(232,65,24,0.1); color:var(--danger); font-size:1.2rem; border:none;"><i class="fab fa-youtube"></i></div>
                        <div class="task-info"><h4>‡¶ü‡¶ø‡¶â‡¶ü‡ßã‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶≤ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì</h4><small>‡¶ï‡¶ø‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶¨‡ßá‡¶® ‡¶∂‡¶ø‡¶ñ‡ßÅ‡¶®</small></div>
                    </div>
                    <span style="font-size:0.65rem; background:#353b48; padding:3px 8px; border-radius:5px;">‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶Ü‡¶∏‡¶õ‡ßá</span>
                </div>
            </div>
        </div>

        <div id="p-profile" class="page">
            <div class="sec-head"><i class="fas fa-wallet"></i> ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®</div>
            <div class="box">
                <p id="w-msg" style="color:var(--danger); font-size:0.75rem; display:none; margin-bottom:10px; font-weight:800;"></p>
                <div class="input-wrap"><i class="fas fa-university"></i><select id="w-method" class="inp" onchange="updateMinMsg()"></select></div>
                <p id="min-msg" style="font-size:0.7rem; color:var(--primary); margin:-15px 0 15px 15px; font-weight:700;">‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶®: ...</p>
                <div class="input-wrap"><i class="fas fa-id-card"></i><input id="w-acc" class="inp" placeholder=" ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ì‡¶Ø‡¶º‡¶æ‡¶≤‡ßá‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡ßç‡¶∞‡ßá‡¶∏"></div>
                <div class="input-wrap"><i class="fas fa-coins"></i><input id="w-amt" class="inp" type="number" placeholder="‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£"></div>
                <button onclick="withdraw()" class="btn-main">‡¶ü‡¶æ‡¶ï‡¶æ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®‡ßá‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß</button>
            </div>
            <div class="sec-head"><i class="fas fa-history"></i> ‡¶∏‡¶∞‡ßç‡¶¨‡¶∂‡ßá‡¶∑ ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‚è∞</div>
            <div id="hist-area" class="task-list"></div>
        </div>
    </div>

    <div class="nav">
        <i class="fas fa-home active" onclick="nav('p-home', this)"></i>
        <i class="fas fa-gift" onclick="nav('p-invite', this)"></i>
        <i class="fas fa-wallet" onclick="nav('p-profile', this)"></i>
        <i class="fas fa-headset" onclick="nav('p-support', this)"></i> 
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <script>
        // CONFIG
        const API_URL = "https://cold-dewm.mdashrafaliakib.workers.dev"; 
        const BOT_TOKEN = "8252453072:AAFkC4hqO6o7pT5apVpieU7-0K4xULo1ke0";
        const CHANNELS = [
           { id: "-1003032580624" },
            { id: "-1003875952190" }
        ];

        const tg = window.Telegram.WebApp;
        tg.ready(); tg.expand();
        tg.setHeaderColor('#121212'); 

        let appState = { user: { balance: 0, totalEarned: 0, referrals: 0, dailyAds: {}, taskHistory: {} }, config: {}, leaderboard: [], history: [] };
        let countdownInterval = null;

        const tgUser = tg.initDataUnsafe.user || { id: "test_user", first_name: "Test" };
        
        // 1. HARD ANTI-CHEAT CHECK
        const storedDevice = localStorage.getItem('unique_device_id');
        if(storedDevice && storedDevice != tgUser.id) {
            document.getElementById('banned-screen').style.display = 'flex';
            document.getElementById('loader').style.display = 'none';
            throw new Error("Banned");
        } else {
            localStorage.setItem('unique_device_id', tgUser.id);
        }

        // 2. STARTUP
        window.onload = async () => {
            const loader = document.getElementById('loader');
            const txt = document.getElementById('prog-txt');
            loader.style.display = 'flex';
            txt.innerText = '‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';
            
            // SHOW WELCOME MODAL ON LOAD
            document.getElementById('welcome-modal').style.display = 'flex';
            
            checkMembershipOnLoad();
        };

        async function checkMembershipOnLoad() {
            const isJoined = await checkChannels();
            if (isJoined) {
                startLoadingBar();
            } else {
                document.getElementById('loader').style.display = 'none';
                document.getElementById('join-modal').style.display = 'flex';
            }
        }

        // 3. ACTUAL VERIFICATION LOGIC
        async function checkChannels() {
            try {
                for (const ch of CHANNELS) {
                    const res = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/getChatMember?chat_id=${ch.id}&user_id=${tgUser.id}`);
                    const data = await res.json();
                    if (!data.ok || ['left', 'kicked'].includes(data.result.status)) {
                        return false;
                    }
                }
                return true;
            } catch (e) {
                return false;
            }
        }

        // 4. BUTTON CLICK VERIFY
        async function verifyJoin() {
            const btn = document.getElementById('v-btn');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';
            
            const isJoined = await checkChannels();
            
            if (isJoined) {
                tg.HapticFeedback.notificationOccurred('success');
                btn.style.background = '#4cd137'; // Green
                btn.innerHTML = '<i class="fas fa-check"></i> ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®!';
                
                setTimeout(() => {
                    document.getElementById('join-modal').style.display = 'none';
                    startLoadingBar(); 
                }, 500);
            } else {
                tg.HapticFeedback.notificationOccurred('error'); 
                btn.classList.add('error'); 
                btn.innerHTML = '<i class="fas fa-times-circle"></i> ‡¶ú‡¶Ø‡¶º‡ßá‡¶® ‡¶ï‡¶∞‡ßá‡¶®‡¶®‡¶ø!';
                toastError("‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶∏‡¶¨ ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤‡ßá ‡¶ú‡¶Ø‡¶º‡ßá‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®!");
                
                setTimeout(() => {
                    btn.classList.remove('error');
                    btn.innerHTML = originalText;
                }, 1500);
            }
        }

        // 5. APP LOADING
        function startLoadingBar() {
            const loader = document.getElementById('loader');
            loader.style.display = 'flex'; 
            const txt = document.getElementById('prog-txt');
            
            let width = 0;
            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                    loader.style.display = 'none';
                    document.getElementById('app').style.display = 'block';
                    initializeApp(tgUser); 
                    toast("‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ!");
                } else {
                    width += 2; 
                    txt.innerText = width + '%';
                }
            }, 30);
        }

        async function api(action, method = 'GET', body = null) {
            try {
                // LIVE UPDATE FIX: Added Timestamp &t=... to force fresh data
                let url = `${API_URL}?action=${action}&t=${Date.now()}`;
                if (method === 'GET' && body) Object.keys(body).forEach(k => url += `&${k}=${body[k]}`);
                const opts = { method: method };
                if (method !== 'GET' && body) opts.body = JSON.stringify(body);
                const res = await fetch(url, opts);
                return await res.json();
            } catch (e) { return null; }
        }

        async function initializeApp(u) {
            document.getElementById('u-name').innerText = u.first_name;
            document.getElementById('u-id').innerText = `ID: ${u.id}`;
            if(u.photo_url) document.getElementById('u-img').src = u.photo_url;

            const cached = localStorage.getItem(`app_${u.id}`);
            if(cached) { appState = JSON.parse(cached); renderAll(); } 
            else { appState.user.id = u.id; }

            try {
                const [config, user] = await Promise.all([
                    api('getConfig'),
                    api('login', 'POST', { id: u.id, firstName: u.first_name, photoUrl: u.photo_url||'', refId: tg.initDataUnsafe.start_param })
                ]);

                if(config) appState.config = config;
                if(user) appState.user = { ...appState.user, ...user };
                
                const lb = await api('getLeaderboard');
                if(lb) appState.leaderboard = lb;
                
                const hist = await api('getHistory', 'GET', { id: u.id });
                if(hist) appState.history = hist;

                saveLocal(); renderAll();
            } catch (e) {}
        }

        function saveLocal() { localStorage.setItem(`app_${appState.user.id}`, JSON.stringify(appState)); }

        function renderAll() {
            const sym = appState.config.currencySymbol || "TK";
            document.querySelectorAll('.currency').forEach(e => e.innerText = sym);
            const u = appState.user;
            document.getElementById('u-bal').innerText = (u.balance||0).toFixed(2);
            document.getElementById('u-earn').innerText = (u.totalEarned||0).toFixed(2);
            document.getElementById('u-ref').innerText = u.referrals || 0;
            
            document.getElementById('ref-link').value = `https://t.me/${appState.config.botUsername}/app?startapp=${u.id}`;
            
            const refAmt = appState.config.referralBonus || 0;
            if(refAmt > 0) document.getElementById('invite-txt').innerText = `‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ${refAmt} ${sym} ‡¶Ü‡¶Ø‡¶º ‡¶ï‡¶∞‡ßÅ‡¶®!`;

            renderAds(); renderTasks(); renderLeaderboard(); renderHistory(); renderMethods(); loadAdScripts();
        }

        function loadAdScripts() {
            (appState.config.adSlots||[]).forEach(s => {
                if(s.network==='monetag' && !document.querySelector(`script[data-zone="${s.id}"]`)) {
                    let sc=document.createElement('script'); sc.src='//libtl.com/sdk.js'; sc.dataset.zone=s.id; sc.dataset.sdk=`show_${s.id}`; document.body.appendChild(sc);
                } else if(s.network==='gigapub') {
                    let sc=document.createElement('script'); sc.src=`https://ad.gigapub.tech/script?id=${s.id}`; document.body.appendChild(sc);
                }
            });
        }

        function renderAds() {
            const el = document.getElementById('ad-area'); el.innerHTML = '';
            const today = new Date().toISOString().slice(0,10);
            if(appState.user.lastActive !== today) { appState.user.dailyAds = {}; appState.user.lastActive = today; saveLocal(); }
            (appState.config.adSlots||[]).forEach((s, i) => {
                const limit = appState.config.dailyAdLimit || 10;
                const done = (appState.user.dailyAds && appState.user.dailyAds[s.id]) || 0;
                const max = done >= limit;
                el.innerHTML += `<div class="ad-card ${max?'disabled':''}" onclick="${max?'':`watchAd('${s.id}','${s.network}')`}"><i class="fas fa-play"></i><h4>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶∏‡ßç‡¶≤‡¶ü ${i+1}</h4><span>${done}/${limit} ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá</span></div>`;
            });
        }
        function watchAd(id, net) {
            toast("‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá..."); tg.HapticFeedback.impactOccurred('light');
            let p;
            if(net==='monetag' && window[`show_${id}`]) p = window[`show_${id}`]();
            else if(net==='gigapub' && window.showGiga) p = window.showGiga();
            else { toast("‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§ ‡¶®‡¶Ø‡¶º"); return; }
            p.then(async () => {
                const r = appState.config.adReward || 0.5;
                appState.user.balance += r; appState.user.totalEarned += r;
                if(!appState.user.dailyAds) appState.user.dailyAds = {};
                appState.user.dailyAds[id] = (appState.user.dailyAds[id]||0) + 1;
                saveLocal(); renderAll(); toast(`‡¶∏‡¶´‡¶≤! +${r}`);
                tg.HapticFeedback.notificationOccurred('success');
                await api('updateBalance', 'POST', { id: appState.user.id, amount: r });
            }).catch(() => toast("‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•/‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá"));
        }

        function renderTasks() {
            const oneTimeEl = document.getElementById('onetime-task-area');
            const dailyEl = document.getElementById('daily-task-area');
            oneTimeEl.innerHTML = ''; dailyEl.innerHTML = '';
            
            const tasks = appState.config.webTasks || {};
            const sym = appState.config.currencySymbol || "$DOGS";
            const now = Date.now();
            
            if(countdownInterval) clearInterval(countdownInterval);
            let countdowns = [];

            Object.keys(tasks).forEach(k => {
                const t = tasks[k];
                const h = (appState.user.taskHistory && appState.user.taskHistory[k]) || {};
                
                if(t.type === 'onetime') {
                    if(h.ts) return; 
                    const html = `<div class="task-item"><div class="task-left"><img src="${t.icon||'https://via.placeholder.com/40'}" class="task-icon"><div class="task-info"><h4>${t.name}</h4><small style="color: var(--success); font-weight: 800; font-size: 0.85rem;">+${t.reward} ${sym}</small></div></div><button id="btn-${k}" class="btn-act btn-start" onclick="runTask('${k}')">‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®</button></div>`;
                    oneTimeEl.innerHTML += html;
                } 
                else if (t.type === 'daily') {
                    let isWait = false;
                    let left = 0;
                    if (h.ts && (now - h.ts) < 86400000) { 
                        isWait = true;
                        left = 86400000 - (now - h.ts);
                    }

                    let btnHtml = '';
                    if(isWait) {
                        btnHtml = `<button id="timer-${k}" class="btn-act btn-wait" disabled>...</button>`;
                        countdowns.push({ id: `timer-${k}`, endTime: now + left });
                    } else {
                        btnHtml = `<button id="btn-${k}" class="btn-act btn-start" onclick="runTask('${k}')">‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®</button>`;
                    }

                    const html = `<div class="task-item" style="opacity:${isWait?0.7:1}"><div class="task-left"><img src="${t.icon||'https://via.placeholder.com/40'}" class="task-icon"><div class="task-info"><h4>${t.name}</h4><small style="color: var(--success); font-weight: 800; font-size: 0.85rem;">+${t.reward} ${sym}</small></div></div>${btnHtml}</div>`;
                    dailyEl.innerHTML += html;
                }
            });

            if(countdowns.length > 0) {
                countdownInterval = setInterval(() => {
                    const curr = Date.now();
                    countdowns.forEach(c => {
                        const el = document.getElementById(c.id);
                        if(!el) return;
                        const diff = c.endTime - curr;
                        if(diff <= 0) {
                            el.className = 'btn-act btn-start'; el.disabled = false; el.innerText = '‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®'; el.onclick = () => renderAll();
                        } else {
                            const h = Math.floor((diff / (1000 * 60 * 60)) % 24);
                            const m = Math.floor((diff / (1000 * 60)) % 60);
                            const s = Math.floor((diff / 1000) % 60);
                            el.innerText = `${h}h ${m}m`; // Simplified long timer
                        }
                    });
                }, 1000);
            }
        }

        // --- UPDATED TIMER LOGIC HERE ---
        function runTask(id) {
            const t = appState.config.webTasks[id];
            tg.openLink(t.url); tg.HapticFeedback.impactOccurred('medium');
            const btn = document.getElementById(`btn-${id}`);
            let s = 10; // 10 Seconds count
            btn.className = 'btn-act btn-wait'; 
            btn.disabled = true;
            const i = setInterval(() => {
                // FIXED: Just show number, small and bold
                btn.innerText = s; 
                s--;
                if(s < 0) { clearInterval(i); btn.className = 'btn-act btn-claim'; btn.innerText = '‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßÅ‡¶®'; btn.disabled = false; btn.onclick = () => claimTask(id, t); }
            }, 1000);
        }

        async function claimTask(id, t) {
            toast("‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...");
            let isJoined = await checkChannels();

            if (!isJoined) {
                toastError("‡¶Ü‡¶ó‡ßá ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤‡ßá ‡¶ú‡¶Ø‡¶º‡ßá‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®!");
                const btn = document.getElementById(`btn-${id}`);
                btn.className = 'btn-act btn-start';
                btn.innerText = '‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®';
                btn.disabled = false;
                btn.onclick = () => runTask(id);
                tg.HapticFeedback.notificationOccurred('error');
                return;
            }

            appState.user.balance += t.reward; appState.user.totalEarned += t.reward;
            if(!appState.user.taskHistory) appState.user.taskHistory = {};
            appState.user.taskHistory[id] = { ts: Date.now() };
            saveLocal(); renderAll(); toast("‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!"); tg.HapticFeedback.notificationOccurred('success');
            await api('updateBalance', 'POST', { id: appState.user.id, amount: t.reward });
        }

        function updateMinMsg() {
            const mName = document.getElementById('w-method').value;
            const methods = appState.config.withdrawMethods || [];
            const method = methods.find(m => m.name === mName);
            if(method) document.getElementById('min-msg').innerText = `‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶® ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®: ${method.min} ${appState.config.currencySymbol}`;
        }

        async function withdraw() {
            const minRef = appState.config.minWithdrawReferrals || 0;
            if(appState.user.referrals < minRef) { document.getElementById('w-msg').style.display='block'; document.getElementById('w-msg').innerText=`‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶® ${minRef} ‡¶ü‡¶ø ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤!`; return; }
            
            const amt = parseFloat(document.getElementById('w-amt').value);
            const mName = document.getElementById('w-method').value;
            const methods = appState.config.withdrawMethods || [];
            const method = methods.find(m => m.name === mName);
            const minLimit = method ? method.min : 10;

            if(!amt || amt < minLimit) { toast(`‡¶∏‡¶∞‡ßç‡¶¨‡¶®‡¶ø‡¶Æ‡ßç‡¶® ${minLimit} $DOGS`); return; }
            if(amt > appState.user.balance) { toast("‡¶Ö‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏"); return; }
            
            toast("‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...");
            const res = await api('withdraw', 'POST', { userId: appState.user.id, userName: appState.user.firstName, amount: amt, method: mName, account: document.getElementById('w-acc').value });
            if(res && res.success) {
                appState.user.balance -= amt; saveLocal(); 
                const hist = await api('getHistory', 'GET', { id: appState.user.id });
                if(hist) appState.history = hist;
                renderAll(); toast("‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß ‡¶ú‡¶Æ‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!"); tg.HapticFeedback.notificationOccurred('success');
            } else { toast(res.message || "‡¶®‡ßá‡¶ü‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶ï ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø"); }
        }

        function renderLeaderboard() {
            const p = document.getElementById('podium-area'); const l = document.getElementById('lb-area');
            p.innerHTML = ''; l.innerHTML = ''; const top = appState.leaderboard;
            if(top.length === 0) { p.innerHTML='<p style="text-align:center">‡¶ï‡ßã‡¶® ‡¶§‡¶•‡ßç‡¶Ø ‡¶®‡ßá‡¶á</p>'; return; }
            if(top[1]) p.innerHTML += getPodium(top[1], 2); if(top[0]) p.innerHTML += getPodium(top[0], 1); if(top[2]) p.innerHTML += getPodium(top[2], 3);
            for(let i=3; i<top.length; i++) l.innerHTML += `<div class="lb-item"><span class="lb-rank">#${i+1}</span><img src="${top[i].photoUrl||'https://via.placeholder.com/40'}" class="lb-img"><div class="lb-name">${top[i].firstName}</div><div class="lb-val">${top[i].referrals}</div></div>`;
        }
        function getPodium(u, r) { return `<div class="podium-item rank-${r}"><div class="crown"><i class="fas fa-crown"></i></div><img src="${u.photoUrl||'https://via.placeholder.com/60'}" class="podium-img"><div class="podium-name">${u.firstName}</div><div class="podium-score">${u.referrals} Refs</div></div>`; }
        
        function renderHistory() {
            const el = document.getElementById('hist-area'); el.innerHTML = ''; const sym = appState.config.currencySymbol || "TK";
            if(appState.history.length === 0) { el.innerHTML='<p style="text-align:center;color:#666">‡¶ï‡ßã‡¶® ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏ ‡¶®‡ßá‡¶á</p>'; return; }
            appState.history.forEach(x => el.innerHTML += `<div class="hist-item ${x.status}"><div class="hist-info"><h4>${x.method} - ${x.amount} ${sym}</h4><small>${new Date(x.timestamp).toLocaleDateString()}</small></div><span class="status-badge">${x.status}</span></div>`);
        }
        function renderMethods() {
            const s = document.getElementById('w-method'); if(s.children.length > 0) return;
            (appState.config.withdrawMethods||[]).forEach(m => s.innerHTML+=`<option value="${m.name}">${m.name}</option>`);
            updateMinMsg();
        }
        function nav(p, e) {
            document.querySelectorAll('.page').forEach(x => x.classList.remove('active')); document.getElementById(p).classList.add('active');
            document.querySelectorAll('.nav i').forEach(x => x.classList.remove('active')); e.classList.add('active');
            if(p==='p-profile') { api('getHistory', 'GET', { id: appState.user.id }).then(hist => { if(hist) { appState.history = hist; saveLocal(); renderAll(); } }); }
            tg.HapticFeedback.impactOccurred('light');
        }
        function copyRef() { const e = document.getElementById('ref-link'); e.select(); document.execCommand('copy'); toast("‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!"); }
        function shareTg() { const link = document.getElementById('ref-link').value; tg.openTelegramLink(`https://t.me/share/url?url=${link}&text=‡¶ú‡¶Ø‡¶º‡ßá‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶Ø‡¶º ‡¶ï‡¶∞‡ßÅ‡¶®!`); }
        function openSupport() { nav('p-support', document.querySelector('.nav .fa-headset')); } // Redirect header button to support page
        function showComingSoon() { toast("‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶Ü‡¶∏‡¶õ‡ßá!"); tg.HapticFeedback.notificationOccurred('warning'); }
        function toast(m) { const t = document.getElementById('toast'); t.innerText=m; t.classList.remove('error'); t.classList.add('show'); setTimeout(()=>t.classList.remove('show'),3000); }
        function toastError(m) { const t = document.getElementById('toast'); t.innerText=m; t.classList.add('error'); t.classList.add('show'); setTimeout(()=>t.classList.remove('show'),3000); }
    </script>


<!-- 'Il est de votre ressort d\x27informer les visiteurs √† propos des cookies utilis√©s et des donn√©es collect√©es sur votre blog. Blogger met √† votre disposition une notification standard que vous pouvez personnaliser, remplacer ou afficher telle quelle sur votre blog. Rendez-vous sur http://www.blogger.com/go/cookiechoices pour obtenir de plus amples informations.' -->
<script src="/js/cookienotice.js" defer></script>
<script>
  document.addEventListener('DOMContentLoaded', function(event) {
    window.cookieChoices && cookieChoices.showCookieConsentBar && cookieChoices.showCookieConsentBar(
        (window.cookieOptions && cookieOptions.msg) || 'Ce site utilise des cookies provenant de Google pour fournir ses services et analyser le trafic. Votre adresse¬†IP et votre user-agent, ainsi que des statistiques relatives aux performances et √† la s√©curit√©, sont transmis √† Google afin d\x27assurer un service de qualit√©, de g√©n√©rer des statistiques d\x27utilisation, et de d√©tecter et de r√©soudre les probl√®mes d\x27abus.',
        (window.cookieOptions && cookieOptions.close) || 'OK¬†!',
        (window.cookieOptions && cookieOptions.learn) || 'En savoir plus',
        (window.cookieOptions && cookieOptions.link) || 'https://www.blogger.com/go/blogspot-cookies');
  });
</script>

</body>
</html>
